# Configuration Nixpacks pour le Frontend Flutter DONS
[phases.setup]
nixPkgs = ["nodejs", "python3"]

[phases.install]
cmds = [
    "curl -fsSL https://storage.googleapis.com/flutter_infra_release/releases/stable/linux/flutter_linux_3.24.5-stable.tar.xz | tar -xJ -C /opt/",
    "export PATH=/opt/flutter/bin:$PATH",
    "flutter pub get"
]

[phases.build]
cmds = [
    "export PATH=/opt/flutter/bin:$PATH",
    "flutter build web --release"
]

[start]
cmd = "cd build/web && python3 -m http.server 3000"